<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday Ritika</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
body {
    margin: 0;
    background: black;
    color: white;
    font-family: Inter, sans-serif;
    overflow: hidden;
}
.page {
    position: fixed;
    inset: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}
.hidden { display: none; }
canvas {
    width: 100vw;
    height: 100vh;
}
input {
    background: #111;
    border: 1px solid #444;
    padding: 12px;
    border-radius: 8px;
    color: white;
    width: 260px;
    text-align: center;
}
</style>
</head>

<body>

<!-- ðŸ” LOGIN PAGE -->
<div id="authPage" class="page">
    <h1 class="text-3xl font-bold mb-6">ðŸŽ‰ Welcome Ritika</h1>
    <input type="password" id="passwordInput" placeholder="Enter Password">
    <button id="loginBtn"
        class="mt-4 bg-blue-500 hover:bg-blue-600 px-6 py-3 rounded-lg font-bold">
        Enter
    </button>
    <p id="status" class="mt-4 text-red-400 hidden">Wrong password</p>
</div>

<!-- ðŸŽ‚ MAIN CONTENT -->
<div id="mainContent" class="hidden">

    <!-- Page 1 -->
    <div id="page1" class="page">
        <button id="startBtn"
            class="bg-blue-500 hover:bg-blue-600 px-10 py-4 rounded-full text-2xl font-bold">
            Start
        </button>
    </div>

    <!-- Page 2 -->
    <div id="page2" class="page hidden">
        <h1 class="text-6xl font-bold mb-10 text-center">
            Happy Birthday Ritika ðŸŽ‚
        </h1>
        <button id="giftBtn"
            class="bg-yellow-400 text-black px-10 py-4 rounded-full text-2xl font-bold">
            View Your Gift
        </button>
    </div>

    <!-- Page 3 -->
    <div id="page3" class="page hidden">
        <canvas id="pixelCanvas"></canvas>
        <canvas id="sourceCanvas" style="display:none;"></canvas>
    </div>
</div>

<audio id="birthdayAudio" src="./music.mp3" preload="auto" loop></audio>

<script>
/* ðŸ” PASSWORD LOGIN */
const PASSWORD = "Bliss_2019";
const audio = document.getElementById("birthdayAudio");

loginBtn.onclick = () => {
    if (passwordInput.value === PASSWORD) {
        authPage.style.display = "none";
        mainContent.classList.remove("hidden");

        audio.muted = true;
        audio.play().then(() => audio.muted = false);
    } else {
        status.classList.remove("hidden");
    }
};

/* PAGE FLOW */
startBtn.onclick = () => {
    page1.classList.add("hidden");
    page2.classList.remove("hidden");
};

giftBtn.onclick = () => {
    page2.classList.add("hidden");
    page3.classList.remove("hidden");
    startGiftAnimation();
};

/* ðŸŽ¨ PIXEL ANIMATION */
const pixelCanvas = document.getElementById("pixelCanvas");
const pixelCtx = pixelCanvas.getContext("2d");
const sourceCanvas = document.getElementById("sourceCanvas");
const sourceCtx = sourceCanvas.getContext("2d");

const SIZE = 1024;
pixelCanvas.width = SIZE;
pixelCanvas.height = SIZE;
sourceCanvas.width = SIZE;
sourceCanvas.height = SIZE;

let pixels = [];
const EASE = 0.25;

function startGiftAnimation() {
    loadImage("./Sketch2.jpg");
}

function loadImage(src) {
    const img = new Image();
    img.onload = () => {
        sourceCtx.drawImage(img, 0, 0, SIZE, SIZE);
        createPixels();
        animate();
    };
    img.onerror = () => alert("Sketch2.jpg not found!");
    img.src = src;
}

function createPixels() {
    pixels = [];
    const data = sourceCtx.getImageData(0, 0, SIZE, SIZE).data;

    for (let y = 0; y < SIZE; y += 2) {
        for (let x = 0; x < SIZE; x += 2) {
            const i = (y * SIZE + x) * 4;
            if (data[i + 3] > 20) {
                pixels.push({
                    x: Math.random() * SIZE,
                    y: Math.random() * SIZE,
                    tx: x,
                    ty: y,
                    c: `rgba(${data[i]},${data[i+1]},${data[i+2]},1)`
                });
            }
        }
    }
}

function animate() {
    pixelCtx.clearRect(0, 0, SIZE, SIZE);
    let done = true;

    for (const p of pixels) {
        p.x += (p.tx - p.x) * EASE;
        p.y += (p.ty - p.y) * EASE;
        pixelCtx.fillStyle = p.c;
        pixelCtx.fillRect(p.x, p.y, 2, 2);

        if (Math.abs(p.x - p.tx) > 0.5) done = false;
    }

    if (!done) requestAnimationFrame(animate);
}
</script>

</body>
</html>
